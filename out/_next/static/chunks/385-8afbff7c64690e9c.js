(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{1464:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});var a=r(5155),s=r(2115),o=r(9946);let l=(0,o.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),n=(0,o.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),i=e=>{let{value:t,onChange:r,placeholder:o,required:i=!0}=e,[d,c]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:d?"text":"password",placeholder:o,value:t,onChange:r,required:i,className:"mt-1 w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400 pr-10"}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!d),children:d?(0,a.jsx)(l,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(n,{className:"h-5 w-5 text-gray-400"})})]})}},2175:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,I:()=>i,db:()=>n});var a=r(3915),s=r(5317),o=r(858);let l=(0,a.Wp)({apiKey:"AIzaSyD2YieupthdsqBItdMd0lFkYKlVxdzKT8I",authDomain:"care4you1-62cc7.firebaseapp.com",projectId:"care4you1-62cc7",storageBucket:"care4you1-62cc7.appspot.com",messagingSenderId:"617055937715",appId:"1:617055937715:android:4b08984ae563213174bcc6"}),n=(0,s.aU)(l),i=(0,o.c7)(l),d=l},3777:(e,t,r)=>{"use strict";r.d(t,{Gh:()=>n,ZN:()=>c,eZ:()=>d,nW:()=>i});var a=r(5317),s=r(9980),o=r(6211),l=r(1368);let n=async(e,t,r)=>{let l=(0,a.rJ)(o.A,"adminuser"),n=(0,a.P)(l,(0,a._M)("phone","==",e)),i=await (0,a.GG)(n);if(i.empty)throw Error("User not found. Please sign up.");let d=i.docs[0],c=d.data();if(!await s.Ay.compare(t,c.password))throw Error("Invalid password");if(!c.phone||!c.role)throw Error("Invalid user data");return{uid:d.id,phone:c.phone,role:c.role,name:c.name,hospitalId:c.hospitalId,hospitalName:c.hospitalName}},i=async(e,t,r,n,i)=>{let d=(0,a.rJ)(o.A,"adminuser"),c=(0,a.P)(d,(0,a._M)("phone","==",e));if(!(await (0,a.GG)(c)).empty)throw Error("Phone number is already registered.");let u=await s.Ay.hash(t,10),h=(0,l.A)(),p={phone:e,password:u,role:r,createdAt:new Date().toISOString()};return n&&(p.hospitalId=n),i&&(p.hospitalName=i),await (0,a.BN)((0,a.H9)(o.A,"adminuser",h),p),h},d=async e=>{try{return(await (0,a.gS)((0,a.rJ)(o.A,"hospitals"),e)).id}catch(e){throw Error("Failed to add hospital: "+e.message)}},c=async(e,t)=>n(e,t,"hospital")},4177:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(2115),o=r(5695),l=r(3777),n=r(5896),i=r(1464);function d(){let[e,t]=(0,s.useState)(""),[r,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),m=(0,o.useRouter)(),{setUser:y}=(0,n.b)(),g=async t=>{if(t.preventDefault(),u(""),p(!0),!e||!r){u("Phone number and password are required."),p(!1);return}try{let t=e.replace(/\D/g,""),a=await (0,l.Gh)(t,r),s={uid:a.uid,phone:a.phone,role:a.role,name:"Admin",...a.hospitalId&&{hospitalId:a.hospitalId},...a.hospitalName&&{hospitalName:a.hospitalName}};localStorage.setItem("adminUser",JSON.stringify(s)),y(s),m.push("/auth/dashboard/appointments")}catch(e){u(e.message||"An error occurred. Please try again.")}finally{p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-100 to-sky-300",children:(0,a.jsxs)("div",{className:"bg-white shadow-2xl rounded-2xl p-8 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-sky-600 text-center mb-6",children:"Admin Login"}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",placeholder:"Enter phone number (e.g., 09111213..)",value:e,onChange:e=>t(e.target.value),required:!0,pattern:"[0-9]{10}",className:"mt-1 w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter 10-digit phone number without symbols"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Password"}),(0,a.jsx)(i.y,{value:r,onChange:e=>d(e.target.value),placeholder:"Enter password",required:!0})]}),c&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:c}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 ".concat(h?"opacity-50 cursor-not-allowed":""),children:h?"Logging in...":"Login"})]})]})})}},5896:(e,t,r)=>{"use strict";r.d(t,{AdminAuthProvider:()=>l,b:()=>n});var a=r(5155),s=r(2115);let o=(0,s.createContext)({user:null,loading:!0,logout:()=>{},setUser:()=>{}}),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("adminUser");if(e)try{let t=JSON.parse(e);t.uid&&t.phone&&t.role?l(t):(console.error("Invalid user data in storage"),localStorage.removeItem("adminUser"))}catch(e){console.error("Error parsing user data",e),localStorage.removeItem("adminUser")}i(!1)})()},[]),(0,a.jsx)(o.Provider,{value:{user:r,loading:n,logout:()=>{localStorage.removeItem("adminUser"),l(null)},setUser:l},children:t})},n=()=>(0,s.useContext)(o)},6211:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5317),s=r(2175);let o=(0,a.aU)(s.A)},9825:()=>{},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:h,...p}=e;return(0,a.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:r,strokeWidth:l?24*Number(o)/Number(s):o,className:n("lucide",c),...!u&&!i(p)&&{"aria-hidden":"true"},...p},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...d}=r;return(0,a.createElement)(c,{ref:o,iconNode:t,className:n("lucide-".concat(s(l(e))),"lucide-".concat(e),i),...d})});return r.displayName=l(e),r}}}]);