(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{2175:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,I:()=>c,db:()=>i});var a=r(3915),n=r(5317),s=r(858);let o=(0,a.Wp)({apiKey:"AIzaSyD2YieupthdsqBItdMd0lFkYKlVxdzKT8I",authDomain:"care4you1-62cc7.firebaseapp.com",projectId:"care4you1-62cc7",storageBucket:"care4you1-62cc7.appspot.com",messagingSenderId:"617055937715",appId:"1:617055937715:android:4b08984ae563213174bcc6"}),i=(0,n.aU)(o),c=(0,s.c7)(o),l=o},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),o=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a,n,s;a=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,i({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,l({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:n,size:s,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,o),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(n)}},6211:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5317),n=r(2175);let s=(0,a.aU)(n.A)},8939:(e,t,r)=>{Promise.resolve().then(r.bind(r,9681))},9681:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(5155),n=r(2115),s=r(5317),o=r(6211),i=r(9911);function c(){let[e,t]=(0,n.useState)([]),[r,c]=(0,n.useState)(!0),[l,d]=(0,n.useState)(""),[u,p]=(0,n.useState)({}),m=[{id:"admin-account",phone:"Admin Account",role:"admin",password:"admin123"},{id:"hospital-admin-account",phone:"Hospital Admin Account",role:"hospitalAdmin",password:"hospital123"}],h=e=>{p(t=>({...t,[e]:!t[e]}))};(0,n.useEffect)(()=>{!async function(){try{let e=(0,s.rJ)(o.A,"adminuser"),r=(await (0,s.GG)(e)).docs.map(e=>{let t=e.data();return{id:e.id,phone:t.phone||"Unknown",role:t.role||"user",password:t.password?"********":"Not set",...t}}),a={};[...m,...r].forEach(e=>{a[e.id]=!1}),p(a),t([...m,...r])}catch(e){d(e instanceof Error?e.message:"Failed to fetch users")}finally{c(!1)}}()},[]);let b=async r=>{if("admin-account"===r||"hospital-admin-account"===r)return void alert("Cannot delete predefined admin accounts.");if(window.confirm("Are you sure you want to delete this user?"))try{c(!0);let a=(0,s.H9)(o.A,"adminuser",r);await (0,s.kd)(a),t(e.filter(e=>e.id!==r)),alert("User deleted successfully.")}catch(e){d(e instanceof Error?e.message:"Failed to delete the user.")}finally{c(!1)}};return r?(0,a.jsx)("div",{children:"Loading..."}):l?(0,a.jsx)("div",{children:l}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto py-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"List of Users"}),(0,a.jsxs)("table",{className:"min-w-full table-auto border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border-b px-4 py-2",children:"Phone Number"}),(0,a.jsx)("th",{className:"border-b px-4 py-2",children:"Role"}),(0,a.jsx)("th",{className:"border-b px-4 py-2",children:"Password"}),(0,a.jsx)("th",{className:"border-b px-4 py-2",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-b px-4 py-2",children:e.phone}),(0,a.jsx)("td",{className:"border-b px-4 py-2",children:e.role}),(0,a.jsxs)("td",{className:"border-b px-4 py-2 flex items-center",children:[u[e.id]?e.password:"********",(0,a.jsx)("button",{onClick:()=>h(e.id),className:"ml-2 text-gray-600 hover:text-gray-800","aria-label":u[e.id]?"Hide password":"Show password",children:u[e.id]?(0,a.jsx)(i.mx3,{}):(0,a.jsx)(i.Ny1,{})})]}),(0,a.jsx)("td",{className:"border-b px-4 py-2",children:!e.id.includes("-account")&&(0,a.jsx)("button",{onClick:()=>b(e.id),className:"ml-4 text-red-500 hover:underline",children:"Delete"})})]},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,711,392,441,684,358],()=>t(8939)),_N_E=e.O()}]);