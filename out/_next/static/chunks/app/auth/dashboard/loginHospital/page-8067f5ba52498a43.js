(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{285:(e,s,a)=>{"use strict";a.d(s,{$:()=>r});var t=a(5155);function r(e){let{variant:s="default",children:a,...r}=e;return(0,t.jsx)("button",{...r,className:"".concat("px-4 py-2 rounded text-white font-semibold"," ").concat({default:"bg-blue-600 hover:bg-blue-700",destructive:"bg-red-600 hover:bg-red-700"}[s]),children:a})}},2175:(e,s,a)=>{"use strict";a.d(s,{A:()=>d,I:()=>o,db:()=>n});var t=a(3915),r=a(5317),i=a(858);let l=(0,t.Wp)({apiKey:"AIzaSyD2YieupthdsqBItdMd0lFkYKlVxdzKT8I",authDomain:"care4you1-62cc7.firebaseapp.com",projectId:"care4you1-62cc7",storageBucket:"care4you1-62cc7.appspot.com",messagingSenderId:"617055937715",appId:"1:617055937715:android:4b08984ae563213174bcc6"}),n=(0,r.aU)(l),o=(0,i.c7)(l),d=l},2523:(e,s,a)=>{"use strict";a.d(s,{p:()=>r});var t=a(5155);function r(e){return(0,t.jsx)("input",{...e,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}},3762:(e,s,a)=>{Promise.resolve().then(a.bind(a,9444))},3777:(e,s,a)=>{"use strict";a.d(s,{Gh:()=>n,ZN:()=>c,eZ:()=>d,nW:()=>o});var t=a(5317),r=a(9980),i=a(6211),l=a(1368);let n=async(e,s,a)=>{let l=(0,t.rJ)(i.A,"adminuser"),n=(0,t.P)(l,(0,t._M)("phone","==",e)),o=await (0,t.GG)(n);if(o.empty)throw Error("User not found. Please sign up.");let d=o.docs[0],c=d.data();if(!await r.Ay.compare(s,c.password))throw Error("Invalid password");if(!c.phone||!c.role)throw Error("Invalid user data");return{uid:d.id,phone:c.phone,role:c.role,name:c.name,hospitalId:c.hospitalId,hospitalName:c.hospitalName}},o=async(e,s,a,n,o)=>{let d=(0,t.rJ)(i.A,"adminuser"),c=(0,t.P)(d,(0,t._M)("phone","==",e));if(!(await (0,t.GG)(c)).empty)throw Error("Phone number is already registered.");let m=await r.Ay.hash(s,10),u=(0,l.A)(),p={phone:e,password:m,role:a,createdAt:new Date().toISOString()};return n&&(p.hospitalId=n),o&&(p.hospitalName=o),await (0,t.BN)((0,t.H9)(i.A,"adminuser",u),p),u},d=async e=>{try{return(await (0,t.gS)((0,t.rJ)(i.A,"hospitals"),e)).id}catch(e){throw Error("Failed to add hospital: "+e.message)}},c=async(e,s)=>n(e,s,"hospital")},6211:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(5317),r=a(2175);let i=(0,t.aU)(r.A)},6695:(e,s,a)=>{"use strict";a.d(s,{W:()=>i,Z:()=>r});var t=a(5155);function r(e){let{children:s,...a}=e;return(0,t.jsx)("div",{...a,className:"bg-white shadow-md rounded-xl border border-gray-200",children:s})}function i(e){let{children:s,...a}=e;return(0,t.jsx)("div",{...a,className:"p-4 space-y-3",children:s})}},9444:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(5155),r=a(2115),i=a(5695),l=a(3777),n=a(2523),o=a(285),d=a(6695);function c(){let[e,s]=(0,r.useState)({phone:"",password:""}),[a,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),p=(0,i.useRouter)(),h=e=>{let{name:a,value:t}=e.target;s(e=>({...e,[a]:t}))},x=async s=>{s.preventDefault(),c(""),u(!0);let{phone:a,password:t}=e;if(!a||!t){c("Phone number and password are required."),u(!1);return}try{let e=await (0,l.ZN)(a,t);localStorage.setItem("adminUser",JSON.stringify({uid:e.uid,phone:e.phone,role:e.role,hospitalId:e.hospitalId,hospitalName:e.hospitalName})),p.push("/auth/dashboard/hospitals")}catch(e){e.message.includes("Access restricted")?c("This login is for hospital administrators only"):e.message.includes("Associated hospital")?c("Hospital account not properly configured"):c(e.message||"Invalid phone number or password")}finally{u(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)(d.Z,{className:"w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Hospital Admin Portal"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to manage your hospital appointments"}),(0,t.jsxs)(d.W,{children:[(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Phone Number"}),(0,t.jsx)(n.p,{type:"tel",name:"phone",placeholder:"Enter registered phone number",value:e.phone,onChange:h,required:!0,autoComplete:"tel"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsx)(n.p,{type:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:h,required:!0,autoComplete:"current-password"})]}),a&&(0,t.jsx)("div",{className:"p-3 bg-red-50 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:a})}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-sky-600 focus:ring-sky-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]})}),(0,t.jsx)(o.$,{type:"submit",disabled:m,className:"w-full bg-sky-600 hover:bg-sky-700",children:m?"Authenticating...":"Sign in"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"New to the platform?"})})]}),(0,t.jsx)("div",{className:"mt-4"})]})]})]})})}},9825:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[992,392,104,441,684,358],()=>s(3762)),_N_E=e.O()}]);