(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{285:(e,s,a)=>{"use strict";a.d(s,{$:()=>t});var r=a(5155);function t(e){let{variant:s="default",children:a,...t}=e;return(0,r.jsx)("button",{...t,className:"".concat("px-4 py-2 rounded text-white font-semibold"," ").concat({default:"bg-blue-600 hover:bg-blue-700",destructive:"bg-red-600 hover:bg-red-700"}[s]),children:a})}},2175:(e,s,a)=>{"use strict";a.d(s,{A:()=>d,I:()=>n,db:()=>i});var r=a(3915),t=a(5317),l=a(858);let o=(0,r.Wp)({apiKey:"AIzaSyD2YieupthdsqBItdMd0lFkYKlVxdzKT8I",authDomain:"care4you1-62cc7.firebaseapp.com",projectId:"care4you1-62cc7",storageBucket:"care4you1-62cc7.appspot.com",messagingSenderId:"617055937715",appId:"1:617055937715:android:4b08984ae563213174bcc6"}),i=(0,t.aU)(o),n=(0,l.c7)(o),d=o},2523:(e,s,a)=>{"use strict";a.d(s,{p:()=>t});var r=a(5155);function t(e){return(0,r.jsx)("input",{...e,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}},3647:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(5155),t=a(2115),l=a(5695),o=a(3777),i=a(2523),n=a(285),d=a(6695);function c(){let[e,s]=(0,t.useState)({phone:"",password:"",confirmPassword:"",hospitalName:"",address:"",description:""}),[a,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),p=(0,l.useRouter)(),h=e=>{let{name:a,value:r}=e.target;s(e=>({...e,[a]:r}))},x=async s=>{s.preventDefault(),c(""),m(!0);let{phone:a,password:r,confirmPassword:t,hospitalName:l,address:i,description:n}=e;if(!a||!r||!l){c("Phone number, password, and hospital name are required."),m(!1);return}if(r!==t){c("Passwords do not match"),m(!1);return}try{let e=await (0,o.nW)(a,r,"hospital");await (0,o.eZ)({name:l,address:i,description:n,adminId:e,createdAt:new Date,status:"active"}),localStorage.setItem("adminUser",JSON.stringify({phone:a,role:"hospital",userId:e,hospitalName:l})),p.push("/auth/dashboard/hospitals")}catch(e){c(e.message||"An error occurred. Please try again.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)(d.Z,{className:"w-full max-w-md shadow-lg rounded-xl overflow-hidden border-0",children:[(0,r.jsxs)("div",{className:"bg-blue-600 p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center text-white",children:"Hospital Registration"}),(0,r.jsx)("p",{className:"text-center text-blue-100 mt-1",children:"Create your hospital administrator account"})]}),(0,r.jsxs)(d.W,{className:"p-6",children:[a&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-md text-sm",children:a}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hospital Name *"}),(0,r.jsx)(i.p,{type:"text",name:"hospitalName",placeholder:"Enter hospital name",value:e.hospitalName,onChange:h,required:!0,className:"focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hospital Address"}),(0,r.jsx)(i.p,{type:"text",name:"address",placeholder:"Enter hospital address",value:e.address,onChange:h,className:"focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admin Phone Number *"}),(0,r.jsx)(i.p,{type:"text",name:"phone",placeholder:"Enter phone number",value:e.phone,onChange:h,required:!0,className:"focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hospital Description"}),(0,r.jsx)("textarea",{name:"description",placeholder:"Brief description of your hospital",value:e.description,onChange:h,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password *"}),(0,r.jsx)(i.p,{type:"password",name:"password",placeholder:"Enter password",value:e.password,onChange:h,required:!0,className:"focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password *"}),(0,r.jsx)(i.p,{type:"password",name:"confirmPassword",placeholder:"Confirm password",value:e.confirmPassword,onChange:h,required:!0,className:"focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,r.jsx)(n.$,{type:"submit",disabled:u,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 transition-colors",children:u?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Register Hospital"})]})]}),(0,r.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t",children:(0,r.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,r.jsx)("a",{href:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Login here"})]})})]})})}},3777:(e,s,a)=>{"use strict";a.d(s,{Gh:()=>i,ZN:()=>c,eZ:()=>d,nW:()=>n});var r=a(5317),t=a(9980),l=a(6211),o=a(1368);let i=async(e,s,a)=>{let o=(0,r.rJ)(l.A,"adminuser"),i=(0,r.P)(o,(0,r._M)("phone","==",e)),n=await (0,r.GG)(i);if(n.empty)throw Error("User not found. Please sign up.");let d=n.docs[0],c=d.data();if(!await t.Ay.compare(s,c.password))throw Error("Invalid password");if(!c.phone||!c.role)throw Error("Invalid user data");return{uid:d.id,phone:c.phone,role:c.role,name:c.name,hospitalId:c.hospitalId,hospitalName:c.hospitalName}},n=async(e,s,a,i,n)=>{let d=(0,r.rJ)(l.A,"adminuser"),c=(0,r.P)(d,(0,r._M)("phone","==",e));if(!(await (0,r.GG)(c)).empty)throw Error("Phone number is already registered.");let u=await t.Ay.hash(s,10),m=(0,o.A)(),p={phone:e,password:u,role:a,createdAt:new Date().toISOString()};return i&&(p.hospitalId=i),n&&(p.hospitalName=n),await (0,r.BN)((0,r.H9)(l.A,"adminuser",m),p),m},d=async e=>{try{return(await (0,r.gS)((0,r.rJ)(l.A,"hospitals"),e)).id}catch(e){throw Error("Failed to add hospital: "+e.message)}},c=async(e,s)=>i(e,s,"hospital")},5983:(e,s,a)=>{Promise.resolve().then(a.bind(a,3647))},6211:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(5317),t=a(2175);let l=(0,r.aU)(t.A)},6695:(e,s,a)=>{"use strict";a.d(s,{W:()=>l,Z:()=>t});var r=a(5155);function t(e){let{children:s,...a}=e;return(0,r.jsx)("div",{...a,className:"bg-white shadow-md rounded-xl border border-gray-200",children:s})}function l(e){let{children:s,...a}=e;return(0,r.jsx)("div",{...a,className:"p-4 space-y-3",children:s})}},9825:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[992,392,104,441,684,358],()=>s(5983)),_N_E=e.O()}]);